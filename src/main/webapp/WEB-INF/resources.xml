<?xml version="1.0" encoding="UTF-8"?>
<!--
  TomEE-specific configuration file for defining resources.
  
  This file defines the DataSource (database connection pool) that
  the application uses. Referenced in persistence.xml via JNDI name.
  
  Place this in src/main/webapp/WEB-INF/ and it will be packaged in the WAR.
-->
<tomee>
    <!--
      DataSource configuration for PostgreSQL.
      
      This creates a connection pool to the PostgreSQL database.
      The JNDI name matches the one in persistence.xml.
    -->
    <Resource id="NetworkMonitorDB" type="javax.sql.DataSource">
        <!-- JDBC driver class -->
        JdbcDriver org.postgresql.Driver
        
        <!-- Database connection URL -->
        JdbcUrl jdbc:postgresql://localhost:5432/network_monitor
        
        <!-- Database credentials -->
        UserName postgres
        Password postgres
        
        <!-- Connection pool settings -->
        InitialSize 5
        MaxActive 20
        MaxIdle 10
        MinIdle 5
        
        <!-- 
          Test connection validity before use.
          Important for long-lived connections.
        -->
        TestOnBorrow true
        TestWhileIdle true
        ValidationQuery SELECT 1
        
        <!-- 
          Remove abandoned connections after 60 seconds.
          Prevents connection leaks from bugs.
        -->
        RemoveAbandoned true
        RemoveAbandonedTimeout 60
    </Resource>
</tomee>
